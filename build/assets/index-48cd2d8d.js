import{b as e,v as t,u as l,l as a,n as r,d as i,i as s,B as o,h as n,P as d,j as c,s as p,I as m,m as u,t as f}from"./index-60ffdcbe.js";import{C as v}from"./index-d49f25e3.js";import{D as x,A as g}from"./index-294b887e.js";import{C as h,T as C}from"./index-08d30a70.js";import{C as b}from"./index-8c8ceb60.js";import{D as w,a as y}from"./input-f3b5d24c.js";import{A}from"./AddAPhoto-2ae14de0.js";import{C as E}from"./Close-55696d9a.js";import{D as S}from"./Delete-0f6d177d.js";import{E as N}from"./Edit-fea7dbbc.js";import{S as j}from"./Save-87375049.js";import{a as D}from"./avatar-0ae0561b.js";import{h as _}from"./moment-0b360bb8.js";import{n as I}from"./index-81163efb.js";import{c as R,a as k}from"./index.module-8c68dbae.js";import"./Modal-eabf89e8.js";import"./Transition-4c2a1824.js";import"./isHostComponent-28f2e306.js";import"./FormLabel-f195491a.js";import"./formControlState-865d6002.js";import"./Typography-63ca3400.js";import"./index-d93c6e67.js";import"./Visibility-f62f166e.js";import"./CircularProgress-6afa790f.js";import"./FormControl-d7e9850b.js";const T=f('<img class="w-full h-full object-cover object-center ">'),$=f('<input class="opacity-0 w-full h-full absolute" accept="image/*" type="file">'),M=f('<div class="absolute p-2 top-0 right-0" title="Upload Your Picture">'),B=f('<div class="absolute top-0 h-full w-full left-0 px-4 overflow-auto py-4">'),O=f('<div class=" flex flex-1 m-[-18px]"><div class="w-[350px] px-4 py-2 border-r-2 border-[#0A0A0A] flex flex-col"><div class="p-4 space-y-4"><div class="space-y-2"><div><div class="pl-[20px]"></div></div><div><div class="pl-[20px]"></div></div><div><div class="pl-[20px]"></div> </div><div><div class="pl-[20px]"></div></div></div></div></div><div class="flex-1 px-4 py-2 flex flex-col">'),F=f('<form class="py-6 flex flex-col flex-1" enctype="multipart/form-data">'),L=f('<div class="flex gap-4"><div class="flex gap-4 items-center"><div class="space-x-4">'),G=f('<div><div class="border border-primarry-2 px-4 bg-primarry-1 sticky top-[5px] z-50 flex justify-between items-center"><div>'),z=f("<span>DATA FROM <b>"),P=f('<div><div class="flex gap-4 items-start flex-1 relative"><div> <!> </div><div class="flex-1"><div class="gap-2 flex flex-wrap px-4"></div></div><div class="flex items-center justify-center h-full"></div></div><div class="w-full flex justify-between items-center absolute bottom-[-5px] left-0"><div></div><div>'),K=f('<div><div class="pl-4 !m-0 border-[#454545] bg-[#2C2C2C] pr-2 py-1 flex gap-4 border-[0] max-w-sm"><div class="whitespace-nowrap max-w-xs relative"><div class="text-ellipsis overflow-hidden relative">'),U=f('<div class="gap-2 flex items-center">'),V=f("<div>"),H=f('<div><img class="w-20">'),Y=()=>{const[f,Y]=e([]),[q,W]=e({}),[J,Q]=e(!1),[X,Z]=e(!1),[ee,te]=e(),[le,ae]=e(null),[re,ie]=e(),se=R({profile_name:k("",{required:!0}),case_group:k("",{required:!0}),remarks:k("",{required:!0})}),oe=t(),ne=l();let de=oe.pathname.split("/"),ce=de[de.length-3];const pe=oe.pathname.split("/").pop();a((()=>{r().get(`/deck-explorer/identification?keyword=${ce}`).then((e=>{console.log(e),se.controls.profile_name.setValue(e.data.items.profile_name),se.controls.case_group.setValue(e.data.items.case_group),se.controls.remarks.setValue(e.data.items.remarks),ae(e.data.items.foto_url),te(_(e.data.items.timestamp).format("D MMMM YYYY"));let t=e.data.items.data.map((e=>({...e,data:e.data.map((e=>({...e,data:e.data.map((e=>(e.field=!1,e)))})))})));Y(t)})),X()})),a((()=>{if(re()){var e=new FileReader;e.readAsDataURL(re()[0]),e.onloadend=function(){ae((t=>({...t,label:e.result,type:"file"})))}}})),a((()=>{console.log(q())})),a((()=>{var e=pe;!/^[\s()+-]*([0-9][\s()+-]*){6,20}$/.test(e)&&e.length<0&&ne("/")}));const me=e=>{e.preventDefault();const{case_group:t,profile_name:l,remarks:a}=se.value;let i=ce,s={case_group:t,profile_name:l,remarks:a,keyword:i,data:f()};const o=()=>{x({icon:"warning",title:"WARNING",text:"Your changes will be saved. Continue?",cancelButtonText:"KEEP EDITING",confirmButtonText:"SAVE",showCancelButton:!0,classConfirm:"warning"}).then((e=>{e.isConfirmed&&r().put("/deck-explorer/identification",s).then((e=>{x({icon:"success",title:"INFO",text:e.data.message,didClose:()=>{ne(-1)}})}))}))};if(re()){const e=new FormData;e.append("file",re()[0]),r().post(`/deck-explorer/upload?keyword=${i}`,e,{headers:{"Content-Type":"application/x-www-form-urlencoded,"}}).then((e=>{o()}))}else o()},ue=e=>{Q(!0),Y((t=>t.map((t=>({...t,data:t.data.map((t=>({...t,data:t.data.map((t=>(t.id===e&&(t.field=!t.field),t)))})))})))))};return i(v,{get children(){return[(()=>{const e=F();return e.addEventListener("submit",me),s(e,i(h,{get headerComponent(){return(()=>{const e=L(),t=e.firstChild.firstChild;return s(t,i(o,{type:"submit",variant:"contained",color:"secondary",sx:{"&.Mui-disabled":{background:"#000",color:"#c0c0c0"}},children:"SAVE CHANGES"}),null),s(t,(()=>{const e=n((()=>!!J()));return()=>e()&&i(o,{variant:"outlined",color:"warning",onClick:()=>{x({icon:"warning",title:"WARNING",text:"Are you sure discard any unsaved changes. Are you sure you want to proceed",cancelButtonText:"KEEP EDITING",confirmButtonText:"OK",showCancelButton:!0,classConfirm:"warning"}).then((e=>{e.isConfirmed&&(Z((e=>!e)),Q(!1),I({title:"Success",text:"DISCARD CHANGES SUCCES"}))}))},children:"DISCARD CHANGES"})})(),null),s(t,i(o,{variant:"outlined",color:"error",onClick:()=>{J()?x({icon:"warning",title:"WARNING",text:"Canceling will discard any unsaved changes. Are you sure you want to proceed",cancelButtonText:"KEEP EDITING",showCancelButton:!0,confirmButtonText:"OK",classConfirm:"warning"}).then((e=>{e.isConfirmed&&ne(-1)})):ne(-1)},children:"CANCEL"}),null),e})()},className:"!flex-1 flex !flex-col !p-4 min-h-[600px]",title:"EDIT",get children(){const e=O(),t=e.firstChild,l=t.firstChild,a=l.firstChild,r=a.firstChild,v=r.firstChild,x=r.nextSibling,g=x.firstChild,h=x.nextSibling,_=h.firstChild,R=h.nextSibling,k=R.firstChild,F=t.nextSibling;return s(l,i(d,{square:!0,elevation:2,class:"relative w-full h-[280px]",get children(){return[(()=>{const e=T();return c((()=>p(e,"src",le()?.label?(le(),le().label):D))),e})(),(()=>{const e=M();return s(e,i(o,{variant:"contained",color:"secondary",sx:{borderRadius:0},get children(){return[i(A,{}),(()=>{const e=$();return e.addEventListener("change",(e=>{ie(e.target.files),se.controls.foto.setValue(e.target.files)})),e})()]}})),e})()]}}),a),s(r,i(C,{className:"!py-0",label:"Original Name"}),v),s(v,i(w,{placeholder:"FIELD ORIGINAL NAME",removebg:!0,removeicon:!0,get control(){return se.controls.profile_name}})),s(x,i(C,{className:"!py-0",label:"CASE NUMBER"}),g),s(g,i(w,{placeholder:"FIELD CASE NUMBER",removebg:!0,removeicon:!0,get control(){return se.controls.case_group}})),s(h,i(C,{className:"!py-0",label:"REMARKS"}),_),s(_,i(w,{placeholder:"FIELD REMARKS",removebg:!0,removeicon:!0,get control(){return se.controls.remarks}})),s(R,i(C,{className:"!py-0",label:"DATE CREATED"}),k),s(k,ee),s(F,i(C,{label:"MULTI SOURCE DATABASE INFORMATION"}),null),s(F,i(b,{title:"16 INFORMATION",className:"flex flex-col flex-1 relative",get children(){const e=B();return s(e,(()=>f().map(((e,t)=>(()=>{const l=G(),a=l.firstChild,r=a.firstChild;return s(a,i(C,{get label(){return(()=>{const t=z(),l=t.firstChild.nextSibling;return s(l,(()=>e.label)),t})()}}),r),s(r,t+1),s(l,(()=>e.data.map((t=>(()=>{const l=P(),a=l.firstChild,r=a.firstChild,d=r.firstChild.nextSibling;d.nextSibling;const f=r.nextSibling,v=f.firstChild,x=f.nextSibling,g=a.nextSibling.firstChild,h=g.nextSibling;return s(r,(()=>1===t.total_data?"":`[${t.total_data}]`),d),s(r,(()=>t.label),null),s(v,(()=>t.data.map((e=>(()=>{const l=K(),a=l.firstChild.firstChild.firstChild;return s(a,(()=>{const l=n((()=>"ID CARD PHOTO"!==t.label));return()=>l()?(()=>{const l=U();return s(l,(()=>{const l=n((()=>!e.field));return()=>l()?[i(m,{color:"info",size:"small",onClick:()=>ue(e.id,t.label),get children(){return i(N,{fontSize:"small"})}}),n((()=>e.label))]:(()=>{const t=V();return s(t,i(y,{autoFocus:!0,get defaultValue(){return e.label},sx:{color:"white"},onChange:t=>{W((l=>({...l,[e.id]:t.target.value})))}}),null),s(t,i(m,{size:"small",color:"info",onClick:()=>{ue(e.id);let t=q()[e.id];var l,a;t&&(l=e.id,I({title:"Success",text:`Success Update ${a=t}`}),Y((e=>e.map((e=>({...e,data:e.data.map((e=>({...e,data:e.data.map((e=>(e.id===l&&(e.label=a),e)))})))}))))))},get children(){return i(j,{fontSize:"small"})}}),null),s(t,i(m,{size:"small",color:"error",onClick:()=>{ue(e.id)},get children(){return i(E,{fontSize:"small"})}}),null),t})()})()),l})():(()=>{const t=H(),l=t.firstChild;return c((()=>p(l,"src",e.label))),t})()})()),c((()=>p(l,"title",e.label))),l})())))),s(x,i(o,{size:"small",color:"error",onClick:()=>{var l,a,r;l=t.id,a=e.id,r=t.label,Q(!0),I({title:"Success",text:`Success Delete ${r}`}),Y((e=>e.reduce(((e,t)=>{const r=(i=t.data,s=l,i.filter((e=>e.id!==s)));var i,s;return 0===r.length&&t.id===a?e:[...e,{...t,data:r}]}),[])))},get children(){return i(S,{fontSize:"small"})}})),c((e=>{const t=`flex gap-4 relative border-b ${"dark"===u()?"border-[#333]":"border-[#aaa]"}  py-2 `,a=("dark"===u()?"text-[#aaa]":"text-[#444]")+" sticky top-[10px] whitespace-nowrap w-[200px] z-10 px-4 pt-2",i=`h-2 w-2 ${"dark"===u()?"bg-[#222222]":"bg-[#aaa]"} left-0`,s=`h-2 w-2 ${"dark"===u()?"bg-[#222222]":"bg-[#aaa]"} right-0`;return t!==e._v$&&(l.className=e._v$=t),a!==e._v$2&&(r.className=e._v$2=a),i!==e._v$3&&(g.className=e._v$3=i),s!==e._v$4&&(h.className=e._v$4=s),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),l})()))),null),c((()=>l.className="bg-[#1e1e1e] p-2 "+(0===t?" col-span-full":f()?.length<2?"col-span-full":""))),l})())))),e}}),null),e}})),e})(),i(g,{description:"Please ensure all required fields are filled out.",title:"ALERT ERROR"})]}})};export{Y as default};
