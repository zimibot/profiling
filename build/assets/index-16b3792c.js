import{b as e,v as t,u as l,l as a,n as i,d as r,i as s,B as o,h as n,S as d,P as c,j as p,s as m,I as f,m as u,t as v}from"./index-60ffdcbe.js";import{C as x}from"./index-d49f25e3.js";import{A as g}from"./index-294b887e.js";import{C as h,T as b}from"./index-08d30a70.js";import{C}from"./index-8c8ceb60.js";import{D as y,a as S}from"./input-f3b5d24c.js";import{A as w}from"./AddAPhoto-2ae14de0.js";import{C as A}from"./Close-55696d9a.js";import{D as E}from"./Delete-0f6d177d.js";import{E as j}from"./Edit-fea7dbbc.js";import{S as N}from"./Save-87375049.js";import{a as _}from"./avatar-0ae0561b.js";import{h as k}from"./moment-0b360bb8.js";import{n as D}from"./index-81163efb.js";import{c as R,a as I}from"./index.module-8c68dbae.js";import"./Modal-eabf89e8.js";import"./Transition-4c2a1824.js";import"./isHostComponent-28f2e306.js";import"./FormLabel-f195491a.js";import"./formControlState-865d6002.js";import"./Typography-63ca3400.js";import"./index-d93c6e67.js";import"./Visibility-f62f166e.js";import"./CircularProgress-6afa790f.js";import"./FormControl-d7e9850b.js";const $=v('<img class="w-full h-full object-cover object-center ">'),T=v('<input class="opacity-0 w-full h-full absolute" accept="image/*" type="file">'),M=v('<div class="absolute p-2 top-0 right-0" title="Upload Your Picture">'),F=v('<div class="absolute top-0 h-full w-full left-0 px-4 overflow-auto py-4">'),L=v('<div class=" flex flex-1 m-[-18px]"><div class="w-[350px] px-4 py-2 border-r-2 border-[#0A0A0A] flex flex-col"><div class="p-4 space-y-4"><div class="space-y-2"><div><div class="pl-[20px]"></div></div><div><div class="pl-[20px]"></div></div><div><div class="pl-[20px]"></div> </div><div><div class="pl-[20px]"></div></div></div></div></div><div class="flex-1 px-4 py-2 flex flex-col">'),O=v('<form class="py-6 flex flex-col flex-1" enctype="multipart/form-data">'),z=v('<div class="flex gap-4"><div class="flex gap-4 items-center"><div class="space-x-4">'),B=v('<div><div class="border border-primarry-2 px-4 bg-primarry-1 sticky top-[5px] z-50 flex justify-between items-center"><div>'),P=v("<span>DATA FROM <b>"),V=v('<div><div class="flex gap-4 items-start flex-1 relative"><div> <!> </div><div class="flex-1"><div class="gap-2 flex flex-wrap px-4"></div></div><div class="flex items-center justify-center h-full"></div></div><div class="w-full flex justify-between items-center absolute bottom-[-5px] left-0"><div></div><div>'),G=v('<div><div class="pl-4 !m-0 border-[#454545] bg-[#2C2C2C] pr-2 py-1 flex gap-4 border-[0] max-w-sm"><div class="whitespace-nowrap max-w-xs relative"><div class="text-ellipsis overflow-hidden relative">'),U=v('<div class="gap-2 flex items-center">'),Y=v("<div>"),q=v('<div><img class="w-20">'),H=()=>{const[v,H]=e([]),[K,W]=e({}),[J,Q]=e(!1),[X,Z]=e(!1),[ee,te]=e(),[le,ae]=e(null),[ie,re]=e(),se=R({profile_name:I("",{required:!0}),case_group:I("",{required:!0}),remarks:I("",{required:!0})}),oe=t(),ne=l();let de=oe.pathname.split("/"),ce=de[de.length-3];const pe=oe.pathname.split("/").pop();let me=oe.search.split("=").pop();console.log(me);let fe="getPhoneList"===me?"phone_list":"getVehicle"===me?"kendaraan":"getFamily"===me?"family":"getAlias"===me?"alias":"";a((()=>{i().get(`/deck-explorer/identification?keyword=${ce}`).then((e=>{console.log(e),se.controls.profile_name.setValue(e.data.items.profile_name),se.controls.case_group.setValue(e.data.items.case_group),se.controls.remarks.setValue(e.data.items.remarks),ae(e.data.items.foto_url),te(k(e.data.items.timestamp).format("D MMMM YYYY"));let t=e.data.items[fe].map((e=>({...e,data:e.data.map((e=>({...e,data:e.data.map((e=>(e.field=!1,e)))})))})));H(t)})),X()})),a((()=>{if(ie()){var e=new FileReader;e.readAsDataURL(ie()[0]),e.onloadend=function(){ae((t=>({...t,label:e.result,type:"file"})))}}})),a((()=>{console.log(K())})),a((()=>{var e=pe;!/^[\s()+-]*([0-9][\s()+-]*){6,20}$/.test(e)&&e.length<0&&ne("/")}));const ue=e=>{e.preventDefault();const{case_group:t,profile_name:l,remarks:a}=se.value;let r=ce,s={case_group:t,profile_name:l,remarks:a,keyword:r,[fe]:v()};const o=()=>{i().put("/deck-explorer/identification",s).then((e=>{d.fire({icon:"warning",title:"WARNING",text:"Your changes will be saved. Continue?",cancelButtonText:"KEEP EDITING",confirmButtonText:"SAVE",showCancelButton:!0}).then((t=>{t.isConfirmed&&d.fire({icon:"success",title:"INFO",text:e.data.message,didClose:()=>{ne(-1)}})}))}))};if(ie()){const e=new FormData;e.append("file",ie()[0]),i().post(`/deck-explorer/upload?keyword=${r}`,e,{headers:{"Content-Type":"application/x-www-form-urlencoded,"}}).then((e=>{o()}))}else o()},ve=e=>{Q(!0),H((t=>t.map((t=>({...t,data:t.data.map((t=>({...t,data:t.data.map((t=>(t.id===e&&(t.field=!t.field),t)))})))})))))};return r(x,{get children(){return[(()=>{const e=O();return e.addEventListener("submit",ue),s(e,r(h,{get headerComponent(){return(()=>{const e=z(),t=e.firstChild.firstChild;return s(t,r(o,{type:"submit",variant:"contained",color:"secondary",sx:{"&.Mui-disabled":{background:"#000",color:"#c0c0c0"}},children:"SAVE"}),null),s(t,(()=>{const e=n((()=>!!J()));return()=>e()&&r(o,{variant:"outlined",color:"warning",onClick:()=>{Z((e=>!e)),Q(!1),D({title:"Success",text:"DISCARD CHANGES SUCCES"})},children:"DISCARD CHANGES"})})(),null),s(t,r(o,{variant:"outlined",color:"error",onClick:()=>{J()?d.fire({icon:"warning",title:"WARNING",text:"Canceling will discard any unsaved changes. Are you sure you want to proceed",cancelButtonText:"KEEP EDITING",showCancelButton:!0}).then((e=>{e.isConfirmed&&ne(-1)})):ne(-1)},children:"CANCEL"}),null),e})()},className:"!flex-1 flex !flex-col !p-4 min-h-[600px]",title:"EDIT",get children(){const e=L(),t=e.firstChild,l=t.firstChild,a=l.firstChild,i=a.firstChild,d=i.firstChild,x=i.nextSibling,g=x.firstChild,h=x.nextSibling,k=h.firstChild,R=h.nextSibling,I=R.firstChild,O=t.nextSibling;return s(l,r(c,{square:!0,elevation:2,class:"relative w-full h-[280px]",get children(){return[(()=>{const e=$();return p((()=>m(e,"src",le()?.label?(le(),le().label):_))),e})(),(()=>{const e=M();return s(e,r(o,{variant:"contained",color:"secondary",sx:{borderRadius:0},get children(){return[r(w,{}),(()=>{const e=T();return e.addEventListener("change",(e=>{re(e.target.files),se.controls.foto.setValue(e.target.files)})),e})()]}})),e})()]}}),a),s(i,r(b,{className:"!py-0",label:"Original Name"}),d),s(d,r(y,{placeholder:"FIELD ORIGINAL NAME",removebg:!0,removeicon:!0,get control(){return se.controls.profile_name}})),s(x,r(b,{className:"!py-0",label:"CASE NUMBER"}),g),s(g,r(y,{placeholder:"FIELD CASE NUMBER",removebg:!0,removeicon:!0,get control(){return se.controls.case_group}})),s(h,r(b,{className:"!py-0",label:"REMARKS"}),k),s(k,r(y,{placeholder:"FIELD REMARKS",removebg:!0,removeicon:!0,get control(){return se.controls.remarks}})),s(R,r(b,{className:"!py-0",label:"DATE CREATED"}),I),s(I,ee),s(O,r(b,{label:"MULTI SOURCE DATABASE INFORMATION"}),null),s(O,r(C,{title:"16 INFORMATION",className:"flex flex-col flex-1 relative",get children(){const e=F();return s(e,(()=>v().map(((e,t)=>(()=>{const l=B(),a=l.firstChild,i=a.firstChild;return s(a,r(b,{get label(){return(()=>{const t=P(),l=t.firstChild.nextSibling;return s(l,(()=>e.label)),t})()}}),i),s(i,t+1),s(l,(()=>e.data.map((t=>(()=>{const l=V(),a=l.firstChild,i=a.firstChild,d=i.firstChild.nextSibling;d.nextSibling;const c=i.nextSibling,v=c.firstChild,x=c.nextSibling,g=a.nextSibling.firstChild,h=g.nextSibling;return s(i,(()=>1===t.total_data?"":`[${t.total_data}]`),d),s(i,(()=>t.label),null),s(v,(()=>t.data.map((e=>(()=>{const l=G(),a=l.firstChild.firstChild.firstChild;return s(a,(()=>{const l=n((()=>"ID CARD PHOTO"!==t.label));return()=>l()?(()=>{const l=U();return s(l,(()=>{const l=n((()=>!e.field));return()=>l()?[r(f,{color:"info",size:"small",onClick:()=>ve(e.id,t.label),get children(){return r(j,{fontSize:"small"})}}),n((()=>e.label))]:(()=>{const t=Y();return s(t,r(S,{autoFocus:!0,get defaultValue(){return e.label},sx:{color:"white"},onChange:t=>{W((l=>({...l,[e.id]:t.target.value})))}}),null),s(t,r(f,{size:"small",color:"info",onClick:()=>{ve(e.id);let t=K()[e.id];t&&((e,t)=>{D({title:"Success",text:`Success Update ${t}`}),H((l=>l.map((l=>({...l,data:l.data.map((l=>({...l,data:l.data.map((l=>(l.id===e&&(l.label=t),l)))})))})))))})(e.id,t)},get children(){return r(N,{fontSize:"small"})}}),null),s(t,r(f,{size:"small",color:"error",onClick:()=>{ve(e.id)},get children(){return r(A,{fontSize:"small"})}}),null),t})()})()),l})():(()=>{const t=q(),l=t.firstChild;return p((()=>m(l,"src",e.label))),t})()})()),p((()=>m(l,"title",e.label))),l})())))),s(x,r(o,{size:"small",color:"error",onClick:()=>{var l,a,i;l=t.id,a=e.id,i=t.label,Q(!0),D({title:"Success",text:`Success Delete ${i}`}),H((e=>e.reduce(((e,t)=>{const i=(r=t.data,s=l,r.filter((e=>e.id!==s)));var r,s;return 0===i.length&&t.id===a?e:[...e,{...t,data:i}]}),[])))},get children(){return r(E,{fontSize:"small"})}})),p((e=>{const t=`flex gap-4 relative border-b ${"dark"===u()?"border-[#333]":"border-[#aaa]"}  py-2 `,a=("dark"===u()?"text-[#aaa]":"text-[#444]")+" sticky top-[10px] whitespace-nowrap w-[200px] z-10 px-4 pt-2",r=`h-2 w-2 ${"dark"===u()?"bg-[#222222]":"bg-[#aaa]"} left-0`,s=`h-2 w-2 ${"dark"===u()?"bg-[#222222]":"bg-[#aaa]"} right-0`;return t!==e._v$&&(l.className=e._v$=t),a!==e._v$2&&(i.className=e._v$2=a),r!==e._v$3&&(g.className=e._v$3=r),s!==e._v$4&&(h.className=e._v$4=s),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),l})()))),null),p((()=>l.className="bg-[#1e1e1e] p-2 "+(0===t?" col-span-full":v()?.length<2?"col-span-full":""))),l})())))),e}}),null),e}})),e})(),r(g,{description:"Please ensure all required fields are filled out.",title:"ALERT ERROR"})]}})};export{H as default};
