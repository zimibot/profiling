import{f as e,t,b as i,v as l,p as r,l as s,n as o,d as a,i as n,I as d,h as c,B as p,S as v,r as u}from"./index-60ffdcbe.js";import{D as m}from"./Divider-65d22fcf.js";import{D as f}from"./Drawer-89782005.js";import{S as h}from"./Switch-748bb409.js";import{L as g}from"./index-7f37c568.js";import{C as b}from"./index-8c8ceb60.js";import{T as C}from"./index-08d30a70.js";import{L as x}from"./leaflet-e23c1952.js";import{D as S,I as y}from"./input-f3b5d24c.js";import{C as w}from"./Close-55696d9a.js";import{R as T}from"./radio-2ef793f2.js";import{h as j}from"./moment-0b360bb8.js";import{c as E,a as k}from"./index.module-8c68dbae.js";import"./Modal-eabf89e8.js";import"./Transition-4c2a1824.js";import"./isHostComponent-28f2e306.js";import"./RadioGroup-36b778d8.js";import"./FormControlLabel-ed2de69f.js";import"./FormControl-d7e9850b.js";import"./formControlState-865d6002.js";import"./Typography-63ca3400.js";import"./FormLabel-f195491a.js";import"./index-d49f25e3.js";import"./avatar-0ae0561b.js";import"./index-d93c6e67.js";import"./Visibility-f62f166e.js";import"./CircularProgress-6afa790f.js";const A=t('<svg><path d="M0 0h24v24H0z" fill="none"></svg>',!1,!0),D=t('<svg><path d="M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3zm-2 20h-4v-1h4v1zm3.25-3H6.75V4h10.5v14z"></svg>',!1,!0),M=e((()=>[A(),D()]),"PhoneAndroid"),L=t('<svg><path d="M13.05 9.79L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zm0 0L10 7.5v9l3.05-2.29L16 12zM11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zm1.61 6.74C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43zM22 12c0 5.16-3.92 9.42-8.95 9.95v-2.02C16.97 19.41 20 16.05 20 12s-3.03-7.41-6.95-7.93V2.05C18.08 2.58 22 6.84 22 12z"></svg>',!1,!0),I=e((()=>L()),"SlowMotionVideo"),z=t('<svg><path d="M0 0h24v24H0z" fill="none"></svg>',!1,!0),H=t('<svg><path d="M6 6h12v12H6z"></svg>',!1,!0),N=e((()=>[z(),H()]),"Stop"),O=t('<div class="grid grid-cols-8 h-full"><div class="col-span-3 flex flex-col"><div class="px-4 py-2 grid grid-cols-2"></div><div class="flex flex-col flex-1 relative"><div class="absolute w-full h-full left-0 top-0 overflow-auto"></div></div></div><div class="col-span-5 relative overflow-hidden"><div class="w-full h-full absolute"></div><div class="py-4 pr-4 pl-[60px] absolute z-[999] top-0 w-full"><form class="bg-primarry-1 w-full">'),R=t('<div class="flex flex-col flex-1">'),V=t('<div class="px-4 py-2 flex gap-4 justify-between items-center"><div> </div><div class="flex gap-4 items-center"><div class="text-white text-opacity-60"> </div><div class="flex">'),P=t('<div class="relative"><div class="p-4 text-white flex justify-between items-center "><div>SCHEDULE LOCATION TRACKING</div></div><form class="px-4 py-2 space-y-4 text-white"><div class="bg-primarry-2 p-3 flex justify-between items-center"><div> <span></span></div></div><div class=" space-y-4"><div class="grid grid-cols-2 gap-4"><div></div><div></div></div></div><div class="space-y-2"><div class="flex items-center gap-4"></div></div><div class="grid grid-cols-2 gap-4">'),K=t('<span class="font-bold">Interval Time'),U=t('<div class="grid grid-cols-2 gap-4"><div></div><div>');let B=[{label:"1 Minutes",value:1},{label:"30 Minutes",value:30},{label:"1 Hours",value:60},{label:"12 Hours",value:720},{label:"24 Hours",value:1440}];const G=()=>{const[e,t]=i([]);let A=l().pathname.split("/"),D=A[A.length-2];const[L,z]=i(!1),[H,G]=i({isActive:!1,keyword:null});const q=E({keyword:k("")});let Y=j().format("YYYY-MM-DD"),F=j().format("HH:mm");const J=E({keyword:k(null,{required:!0}),startTime:k(F,{required:!0}),startDate:k(Y,{required:!0}),endDate:k(null,{required:!0}),endTime:k(null,{required:!0}),isEnabled:k(!1),interval:k(null)});let W;r((()=>function(e){const t=x.map(e).setView([51.505,-.09],13);x.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",{attribution:""}).addTo(t),x.marker([51.5,-.09]).addTo(t).bindPopup("A pretty CSS3 popup.<br> Easily customizable.").openPopup()}(W)));const X=e=>{e.preventDefault();const{startDate:t,startTime:i,endTime:l,endDate:r,isEnabled:s,interval:a}=J.value;let n={startDate:t,startTime:i,endTime:l,endDate:r,isEnabled:s,interval:a,keyword:H().keyword};z(!0),o().post("/checkpos/schedule",n).then((e=>{z(!1),v.fire({icon:"success",title:"SUCCESS",text:e.data.message})}))};let _,Z;s((()=>{L(),o().get(`/checkpos/search?keyword=${D}`).then((e=>{let i=e.data.items.map((e=>({keyword:e.keyword,active:!0,interval:e.interval,timestamp:j(e.timestamp).fromNow(),_id:1,children:[{title:"CEKPOS",value:"03",children:[{title:"ALAMAT",value:"JAWA BARAT, KAB. SUKABUMI, NYALINDUNG, KERTAANGSANA"},{title:"DEVICE",value:"IPHONE X"},{title:"PROVIDER",value:"TELKOMSEL"},{title:"IMEI",value:"510107632050788"},{title:"IMSI",value:"510107632050788"},{title:"MAPS",value:"https://www.google.com/maps?q=3.548333,98.673611"}]}]})));t(i)}))}));const $=e=>{e.preventDefault();const{keyword:t}=q.value;let i={keyword:t,keywordTerkait:D};z(!0),o().post("/checkpos/search",i).then((e=>{z(!1),v.fire({icon:"success",title:"SUCCESS",text:e.data.message})}))};return a(g,{title:"MAP TRACKING",get children(){const t=R();return n(t,a(C,{label:"LOCATION SOURCE"}),null),n(t,a(b,{title:"Base Transceiver Station DETECTOR",className:"flex-1 !p-0",get children(){const t=O(),i=t.firstChild,l=i.firstChild,r=l.nextSibling,s=r.firstChild,o=i.nextSibling,v=o.firstChild,g=v.nextSibling.firstChild;n(l,a(C,{label:"History Cekpos"})),n(i,a(m,{}),r),n(s,(()=>e().map((e=>[(()=>{const t=V(),i=t.firstChild,l=i.firstChild,r=i.nextSibling.firstChild,s=r.firstChild,o=r.nextSibling;return n(i,(()=>e.keyword),l),n(r,(()=>e.timestamp),s),n(o,a(d,{color:"info",title:"SCHEDULE LOCATION TRACKING",onClick:()=>G((t=>({keyword:e.keyword,isActive:!0}))),get children(){return c((()=>!!e?.interval))()?a(N,{color:"warning"}):a(I,{})}})),t})(),a(m,{})]))));"function"==typeof _?u(_,o):_=o;return"function"==typeof W?u(W,v):W=v,g.addEventListener("submit",$),n(g,a(S,{get control(){return q.controls.keyword},placeholder:"Search By MSISDN",loading:L})),n(o,_&&a(f,{variant:"temporary",container:_,anchor:"left",get open(){return H().isActive},sx:{display:{xs:"block"},position:"absolute","& .MuiDrawer-paper":{boxSizing:"border-box",width:"80%"},"& .MuiPaper-root":{position:"absolute",bgcolor:"#242424"},"& .MuiBackdrop-root":{position:"absolute"}},get children(){return[" ",(()=>{const e=P(),t=e.firstChild;t.firstChild;const i=t.nextSibling,l=i.firstChild,r=l.firstChild,s=r.firstChild,o=s.nextSibling,v=l.nextSibling,m=v.firstChild.firstChild,f=m.nextSibling,g=v.nextSibling,b=g.firstChild,x=g.nextSibling;return"function"==typeof Z?u(Z,e):Z=e,n(t,a(d,{color:"error",onClick:()=>G((e=>!1)),get children(){return a(w,{})}}),null),i.addEventListener("submit",X),n(r,a(M,{fontSize:"small"}),s),n(o,(()=>H().keyword)),n(m,a(y,{type:"date",label:"Set Start Date",get control(){return J.controls.startDate}})),n(f,a(y,{type:"time",label:"Set Start Time",get control(){return J.controls.startTime}})),n(b,a(C,{get label(){return K()}}),null),n(b,a(h,{get checked(){return J.controls.isEnabled.value},onChange:e=>{J.controls.isEnabled.setValue(!e.target.checked)}}),null),n(g,(()=>{const e=c((()=>!!J.controls.isEnabled.value));return()=>e()&&[(()=>{const e=U(),t=e.firstChild,i=t.nextSibling;return n(t,a(y,{type:"date",label:"Set End Date",get control(){return J.controls.endDate}})),n(i,a(y,{type:"time",label:"Set End Time",get control(){return J.controls.endTime}})),e})(),a(T,{data:B,onChange:e=>J.controls.interval.setValue(parseInt(e.target.value)),get defaultValue(){return J.controls.interval.value}})]})(),null),n(x,a(p,{variant:"contained",color:"error",disabled:!0,children:"STOP"}),null),n(x,a(p,{type:"submit",variant:"contained",color:"info",children:"START"}),null),e})()]}}),null),t}}),null),t}})};export{G as default};
