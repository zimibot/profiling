import{b as e,a as t,u as r,v as a,l as o,n as s,d as l,h as n,i,S as m,I as c,t as p}from"./index-60ffdcbe.js";import{C as u}from"./index-d49f25e3.js";import{S as d,C as y,O as f,L as g}from"./searchFrom-4510e120.js";import{n as h}from"./index-81163efb.js";import{S,D as b}from"./input-f3b5d24c.js";import{V as j}from"./Visibility-f62f166e.js";import{h as k}from"./moment-0b360bb8.js";import{C}from"./index-08d30a70.js";import{R as w}from"./radio-2ef793f2.js";import{c as x,a as I}from"./index.module-8c68dbae.js";import"./Grow-8c30db71.js";import"./Transition-4c2a1824.js";import"./CircularProgress-6afa790f.js";import"./formControlState-865d6002.js";import"./Typography-63ca3400.js";import"./FormControl-d7e9850b.js";import"./FormLabel-f195491a.js";import"./index-d93c6e67.js";import"./FormControlLabel-ed2de69f.js";import"./RadioGroup-36b778d8.js";import"./isHostComponent-28f2e306.js";const L=p('<div class=" text-center">'),v=p("<form>"),D=p('<span class="uppercase">SEARCH '),R=()=>{const[p,R]=e(),[E,N]=e(""),[$,H]=e(),[K,M]=e(""),[T,{update:F}]=t(),O=r(),Y=a().pathname.split("/")[3];let P=[{label:"PERSONAL ID",type:"number",value:"NIK"},{label:"MSISDN",type:"number",value:"MSISDN"},{label:"FAMILY ID",type:"number",value:"NKK"},{label:"VEHICLE",type:"teks",value:"vehicle"},{label:"ALL",type:"teks",value:""}],V=[{label:"Keyword",name:"keyword"},{label:"Category",name:"category"},{label:"Relate",name:"terkait"},{label:"Date",name:"timestamp",function:(e,t)=>k(t).format("DD MMMM YYYY HH:mm")},{name:"path",function:(e,t)=>(console.log(e.marked),(()=>{const r=L();return i(r,l(c,{onClick:async()=>{H(!0);try{if(e.marked||e.relate)O(t);else{let r={search:e.keyword,type:e.type,path:`/deck-explorer/search-result/database-information/${e.keyword}`},a=await f(r),o=a.data.items;200===a.status&&(h({title:"Search Keyword",text:`${e.keyword} Success`}),F((e=>({...e,dataSearch:o,terkait:o.terkait}))),localStorage.setItem("dataSearch",JSON.stringify(o)),localStorage.setItem("typeSearch",e.category),H(!1),O(t))}}catch(r){m.fire({icon:"error",title:"Oops...",text:`${e.keyword} can not be found`}),H(!1)}},get disabled(){return $()},color:"primary",size:"small",get children(){return n((()=>!!e.relate))()?l(g,{fontSize:"small"}):n((()=>!e.marked))()?l(S,{fontSize:"small"}):l(j,{fontSize:"small"})}})),r})())}];o((()=>{s().get(`/deck-explorer/result-search?type=${Y}&page=${T()?.currentPage||1}&keyword=${E()}&category=${K()}`).then((e=>{R(e.data)}))}));const z=()=>{const e=x({keyword:I("")}),t=t=>{t.preventDefault();const{keyword:r}=e.value;N(r)};return l(C,{className:"space-y-4",get title(){return(()=>{const e=D();return e.firstChild,i(e,Y,null),e})()},get children(){return[(()=>{const r=v();return r.addEventListener("submit",t),i(r,l(b,{placeholder:"Search By Keyword",get control(){return e.controls.keyword}})),r})(),l(w,{defaultValue:"",onChange:e=>{M(e.target.value),F((e=>({...e,currentPage:1})))},data:P})]}})};return l(u,{get children(){return l(d,{full:!0,classContentRight:"col-span-full",get contenLeft(){return l(z,{})},get contenRight(){return n((()=>!!p()))()&&l(y,{paggination:!0,subTitle:"HISTORY RESULT ",get title(){return`RESULT [${p()?.totalItems||0}]`},data:p,columns:V})}})}})};export{R as default};
