import{b as e,l as t,h as n,X as r,a0 as l,a1 as i,k as o,V as s}from"./index-d44b4c22.js";var a=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,f=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function p(e){let t=0,n=Number.MAX_SAFE_INTEGER;for(let r=0,l=e.length;r<l;r+=1)e[r]<n&&(n=e[r],t=r);return t}var g={position:"relative",width:"100%","max-width":"100%"},y=";position:relative;width:100%;max-width:100%;";function w(e,t){let n=t.columns.length,r=function(e){let t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)}(e),l=r!==t.width,i=r/n,o=new Array(t.columns.length).fill(0);l&&(t.columns=[...o]);let s=e.firstElementChild,a=0;for(;s;){if(s instanceof HTMLElement){let e=p(o);if(l||t.elements[a]!==s){s.style.width=`${i}px`,s.style.position="absolute";let n=o[e];s.style.top=`${n}px`,s.style.left=e*i+"px",s.getBoundingClientRect();let r=s.offsetHeight;t.elements[a]=s,t.heights[a]=r,l=!0,o[e]=n+r}else o[e]+=t.heights[a];a+=1}s=s.nextElementSibling}let c=function(e){let t=0,n=0;for(let r=0,l=e.length;r<l;r+=1)e[r]>n&&(n=e[r],t=r);return t}(o),u=o[c];e.style.height=`${u}px`,t.width=r,t.columns=o}var b=new Map;function v(e){let t=b.get(e);if(t)return t;let n=window.matchMedia(e);return b.set(e,n),n}function O(l,i=1){let[o,s]=e(i);return t((()=>{let e=l();for(let t=0,l=e.length;t<l;t+=1){let l=e[t];n((()=>{let e=v(l.query),t=()=>{e.matches&&s(l.columns)};t(),e.addEventListener("change",t,!1),r((()=>{e.removeEventListener("change",t,!1)}))}))}})),o}function E(a){let[p,b]=e();return t((()=>{let e=p();if(e){e.style.position="relative",e.style.width="100%",e.style.maxWidth="100%";let t={width:0,columns:new Array(a.columns).fill(0),elements:[],heights:[]},i=function(e){let t;return r((()=>{cancelAnimationFrame(t)})),()=>{t&&cancelAnimationFrame(t),t=requestAnimationFrame((()=>e()))}}((()=>{w(e,t)}));n(l((()=>a.items),(()=>{i()}))),window.addEventListener("resize",i,{passive:!0}),r((()=>window.removeEventListener("resize",i)));let o=new MutationObserver((e=>{e.length&&i()}));o.observe(e,{childList:!0}),r((()=>o.disconnect()))}})),i(o({get component(){var e;return null!=(e=a.as)?e:"div"},ref:b,get children(){return s({get each(){return a.items},children:(e,t)=>i({component:"div",get children(){return a.children(e,t)},style:{position:"absolute"}})})},get"data-solid-mason"(){return a.columns},get style(){let e=a.style;return"string"==typeof e?`${e}${y}`:e?((e,t)=>c(e,u(t)))(((e,t)=>{for(var n in t||(t={}))h.call(t,n)&&f(e,n,t[n]);if(d)for(var n of d(t))m.call(t,n)&&f(e,n,t[n]);return e})({},e),{MASON_STYLE:g}):y}},function(e,t){let n={},r=Object.keys(e);for(let l=0,i=r.length;l<i;l+=1){let i=r[l];t.includes(i)||Object.defineProperty(n,i,{get:()=>e[i],configurable:!0,enumerable:!0})}return n}(a,["as","children","columns","items","style"])))}export{O as U,E as q};
