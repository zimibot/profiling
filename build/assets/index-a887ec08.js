import{f as e,t as i,b as t,E as s,l,n as r,d as o,i as a,h as n,B as d,F as c,S as f,G as p}from"./index-d44b4c22.js";import{C as v}from"./index-c66b90dd.js";import{C as m,T as u}from"./index-71d95980.js";import{L as x}from"./leaflet-5dacb592.js";import{C as g}from"./index-24a514f7.js";import{D as h}from"./input-3843779d.js";import{h as b}from"./moment-0b360bb8.js";import"./Chip-db97de14.js";import"./Divider-2cde6a4f.js";import{c as C,a as S}from"./index.module-085e1610.js";import"./Typography-f2013cfe.js";import"./index-1522cdc1.js";import"./Visibility-0e2812d4.js";import"./CircularProgress-07fdfeec.js";import"./formControlState-b6945e4c.js";import"./FormControl-1561601a.js";import"./FormLabel-20daf39e.js";import"./useControlled-15fabf1b.js";import"./isHostComponent-aa695ee2.js";const y=i('<svg><path d="M0 0h24v24H0z" fill="none"></svg>',!1,!0),w=i('<svg><path d="M18 8c0-3.31-2.69-6-6-6S6 4.69 6 8c0 4.5 6 11 6 11s6-6.5 6-11zm-8 0c0-1.1.9-2 2-2s2 .9 2 2-.89 2-2 2c-1.1 0-2-.9-2-2zM5 20v2h14v-2H5z"></svg>',!1,!0),j=e((()=>[y(),w()]),"PinDrop"),P=i('<div class="grid gap-2 relative text-[14px] overflow-auto"><div class="flex gap-2"><div class="font-bold">MSIDN</div><div></div></div><div class="flex gap-2"><div class="font-bold">ALAMAT</div><div></div></div><div class="flex gap-2"><div class="font-bold">DEVICE:</div><div></div></div><div class="flex gap-2"><div class="font-bold">PROVIDER:</div><div></div></div><div class="flex gap-2"><div class="font-bold">IMEI:</div><div></div></div><div class="flex gap-2"><div class="font-bold">IMSI:</div><div></div></div><div class="flex gap-2 cursor-pointer"><div class="font-bold">MAPS:</div><div class=" text-blue-400">'),k=i('<form class="col-span-3 border-r-2 pr-4 border-primarry-2 flex flex-1 flex-col"><div class="relative flex flex-col flex-1"><div class="flex flex-col relative flex-1"><div class="px-4 space-y-4 absolute w-full h-full left-0 top-0 overflow-auto">'),E=i('<div class="flex-1"><div class="w-full h-full"><div class="w-full h-full">'),M=i('<div class="flex flex-col flex-1 col-span-6">'),I=i('<div class="flex flex-1 flex-col py-4">'),O=i('<div><div class="flex justify-between items-center border pr-2 border-primarry-2"><div class="flex gap-2"></div><div> ');let T;new Array(10).fill("");const H=()=>{let e=new(x.Icon.extend({options:{iconSize:[48,48],iconAnchor:[15,0],popupAnchor:[0,-0]}}))({iconUrl:"./assets/marker.png"});const[i,c]=t(null);let y;s((()=>{return e=y,T=x.map(e).setView([-6.2,106.816666],7),void x.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png",{attribution:""}).addTo(T);var e}),[i()]);const w=C({search:S("",{required:!0})}),[H,N]=t(!1),A=(e,i)=>{function t(){window.api.invoke("new_browser",i.maps)}return(()=>{const s=P(),l=s.firstChild,r=l.firstChild.nextSibling,o=l.nextSibling,n=o.firstChild.nextSibling,d=o.nextSibling,c=d.firstChild.nextSibling,f=d.nextSibling,p=f.firstChild.nextSibling,v=f.nextSibling,m=v.firstChild.nextSibling,u=v.nextSibling,x=u.firstChild.nextSibling,g=u.nextSibling,h=g.firstChild.nextSibling;return a(r,e),a(n,(()=>i.address)),a(c,(()=>i.device)),a(p,(()=>i.provider)),a(m,(()=>i.imei)),a(x,(()=>i.imsi)),g.$$click=t,a(h,(()=>i.maps)),s})()},D=async i=>{i.preventDefault();let{search:t}=w.value,s={keyword:t};N(!0);try{const i=await r().post("/checkpos/search",s);let t=i.data.data.keyword,l=i.data.data.response[0];console.log(i.data.data.keyword),x.marker([l.lat,l.long],{icon:e}).addTo(T).bindPopup(A(t,l)).openPopup(),f.fire({icon:"success",title:"SUCCESS",text:i.data.message,didClose:()=>{N(!1),w.controls.search.setValue("")}})}catch(l){/^62\d{10,15}$/.test(t)?f.fire({icon:"error",title:"OOPS",text:"Number not found or switch off"}):f.fire({icon:"error",title:"OOPS",text:"Invalid phone number. Please use the Indonesian country code (e.g., 6287654321)."}),N(!1)}};l((()=>{r().get("/checkpos/search").then((e=>{c(e.data.items)})),H()}));const L=(i,t)=>{let s=i[0],l=s.response[0];var r,o,a;x.marker([l.lat,l.long],{icon:e}).addTo(T).bindPopup(A(t,l)).openPopup(),r=l.lat,o=l.long,a=x.latLng(r,o),T.panTo(a),setTimeout((()=>{T.setView([r,o],15)}),500),setTimeout((()=>{s.active&&T.eachLayer((function(e){e.toGeoJSON&&T.removeLayer(e)}))}),500)};return o(v,{get children(){const e=I();return a(e,o(m,{className:"grid grid-cols-9 flex-1 gap-4",get children(){return[(()=>{const e=k(),t=e.firstChild,s=t.firstChild,l=s.firstChild;return e.addEventListener("submit",D),a(e,o(u,{label:"CHECK POS PHONE NUMBER"}),t),a(e,o(h,{loading:H,type:"number",placeholder:"PHONE NUMBER",get control(){return w.controls.search}}),t),a(t,o(u,{label:"HISTORY CHECK POST "}),s),a(l,(()=>{const e=n((()=>!!i()));return()=>e()?(()=>{const e=n((()=>0===i().length));return()=>e()?"Data Not Found":i()?.map(((e,t)=>(()=>{const t=O(),s=t.firstChild.firstChild,l=s.nextSibling;return l.firstChild,a(s,o(d,{onClick:()=>{let t=i().filter((i=>e._id===i._id));L(t,e.keyword,e.active),c((i=>i.map((i=>({...i,active:e._id===i._id&&!i.active})))))},get startIcon(){return o(j,{})},get children(){return e.keyword}})),a(l,(()=>b(e.timestamp).format("D/M/YY | HH:MM:SS")),null),t})()))})():"Loading..."})()),e})(),(()=>{const e=M();return a(e,o(u,{label:"LOCATION SOURCE"}),null),a(e,o(g,{title:"MAPS",className:"flex-1 !p-0 flex flex-col",get children(){const e=E(),i=e.firstChild.firstChild;return"function"==typeof y?p(y,i):y=i,e}}),null),e})()]}})),e}})};c(["click"]);export{H as default};
